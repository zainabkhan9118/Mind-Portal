"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3946],{2241:(e,r,a)=>{a.d(r,{A:()=>s});var t=a(5155);a(2115);var o=a(9688);let s=e=>{let{htmlFor:r,children:a,className:s}=e;return(0,t.jsx)("label",{htmlFor:r,className:(0,o.QP)("mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400",s),children:a})}},2944:(e,r,a)=>{a.d(r,{O:()=>c,A:()=>u});var t=a(5155),o=a(2115),s=a(7485);let n=async(e,r)=>{try{console.log("Attempting to authenticate with API:",{email:e,password:"******"});let a=await s.A.post("/auth/login",{email:e,password:r});if(a.data&&a.data.access_token)return localStorage.setItem("authToken",a.data.access_token),{id:a.data.id,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),name:e.split("@")[0],password:"",email:e,phone:"",address:"",role:a.data.role};return console.log("Login response is missing access_token:",a.data),null}catch(e){return console.log("Login API endpoint failed:",e instanceof Error?e.message:e),null}},l=[{id:1,email:"admin@zaraschool.com",password:"admin123",firstName:"Admin",lastName:"User",role:"admin"},{id:2,email:"teacher@zaraschool.com",password:"teacher123",firstName:"Teacher",lastName:"Smith",role:"teacher"},{id:3,email:"student@zaraschool.com",password:"student123",firstName:"Student",lastName:"Jones",role:"student"}],i={admin:"/dashboard/admin",teacher:"/dashboard/teacher",student:"/dashboard/student",default:"/dashboard"},d=(0,o.createContext)(void 0),c=e=>{let{children:r}=e,[a,s]=(0,o.useState)(null),[c,u]=(0,o.useState)(!0),[m,g]=(0,o.useState)(null);(0,o.useEffect)(()=>{let e=localStorage.getItem("user");if(e&&s(JSON.parse(e)),u(!1),!localStorage.getItem("users")){let e=l.map(e=>{let{password:r,...a}=e;return a});localStorage.setItem("users",JSON.stringify(e))}},[]);let h=async(e,r)=>{try{if(u(!0),g(null),!e||!r)throw Error("Email and password are required");let a=l.find(a=>a.email.toLowerCase()===e.toLowerCase()&&a.password===r);if(a){let{password:e,...r}=a,t={...r,name:"".concat(r.firstName," ").concat(r.lastName),role:r.role.toLowerCase()};localStorage.setItem("authToken","mock-token-".concat(Date.now())),s(t),localStorage.setItem("user",JSON.stringify(t)),console.log("Signed in as predefined user:",t);return}try{let a=await n(e,r);if(a){let{password:e,...r}=a,t={id:r.id,email:r.email,name:r.name,role:r.role.toLowerCase(),phone:r.phone,address:r.address};s(t),localStorage.setItem("user",JSON.stringify(t)),console.log("Signed in via API:",t)}else g("Invalid credentials. Please check your email and password.")}catch(e){console.error("API authentication error:",e),g("Authentication service is unavailable. Please try again later or use a predefined account.")}}catch(e){g(e instanceof Error?e.message:"Authentication failed"),console.error("Signin error:",e)}finally{u(!1)}},p=async e=>{try{if(u(!0),g(null),!e.email||!e.password||!e.role)throw Error("Email, password, and role are required");if(l.some(r=>r.email===e.email))throw Error("Email is already in use");let r=JSON.parse(localStorage.getItem("users")||"[]");if(r.some(r=>r.email===e.email))throw Error("Email is already in use");let a={id:parseInt("user"+Date.now()),email:e.email,firstName:e.firstName,lastName:e.lastName,name:"".concat(e.firstName," ").concat(e.lastName),role:e.role};r.push(a),localStorage.setItem("users",JSON.stringify(r)),s(a),localStorage.setItem("user",JSON.stringify(a)),console.log("Signed up as:",a)}catch(e){g(e instanceof Error?e.message:"Registration failed"),console.error("Signup error:",e)}finally{u(!1)}},f=!!a;return(0,t.jsx)(d.Provider,{value:{user:a,signin:h,signup:p,signout:()=>{s(null),localStorage.removeItem("user"),console.log("Signed out")},isAuthenticated:f,isLoading:c,error:m,getRedirectPath:()=>a?i[a.role.toLowerCase()]||i.default:"/signin"},children:r})},u=()=>{let e=(0,o.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3041:(e,r,a)=>{a.d(r,{A:()=>o});var t=a(5155);let o=e=>{let{label:r,checked:a,id:o,onChange:s,className:n="",disabled:l=!1}=e;return(0,t.jsxs)("label",{className:"flex items-center space-x-3 group cursor-pointer ".concat(l?"cursor-not-allowed opacity-60":""),children:[(0,t.jsxs)("div",{className:"relative w-5 h-5",children:[(0,t.jsx)("input",{id:o,type:"checkbox",className:"w-5 h-5 appearance-none cursor-pointer dark:border-gray-700 border border-gray-300 checked:border-transparent rounded-md checked:bg-brand-500 disabled:opacity-60 \n          ".concat(n),checked:a,onChange:e=>s(e.target.checked),disabled:l}),a&&(0,t.jsx)("svg",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,t.jsx)("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"white",strokeWidth:"1.94437",strokeLinecap:"round",strokeLinejoin:"round"})}),l&&(0,t.jsx)("svg",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,t.jsx)("path",{d:"M11.6666 3.5L5.24992 9.91667L2.33325 7",stroke:"#E4E7EC",strokeWidth:"2.33333",strokeLinecap:"round",strokeLinejoin:"round"})})]}),r&&(0,t.jsx)("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:r})]})}},3780:(e,r,a)=>{a.d(r,{D3:()=>o.default,Jc:()=>h.default,Kb:()=>m.default,ag:()=>t.default,b1:()=>d.default,bM:()=>l.default,db:()=>i.default,e$:()=>n.default,kp:()=>u.default,rM:()=>c.default,u6:()=>s.default,v_:()=>g.default}),a(792),a(9814),a(1065),a(6689),a(2376),a(4456),a(8403),a(969),a(8827),a(7468),a(6872),a(3224),a(3680);var t=a(7928);a(7642),a(5144),a(1052),a(6923),a(6462),a(9526),a(5035),a(8304),a(9437),a(2778),a(5888),a(8243),a(3311);var o=a(4582);a(8193),a(9597),a(2513);var s=a(304);a(6242);var n=a(7299),l=a(3873),i=a(5766),d=a(1544);a(1467),a(3801);var c=a(9856);a(5021);var u=a(6572),m=a(578),g=a(5357);a(2283),a(1807),a(6970),a(2001),a(2950);var h=a(3951);a(7786),a(3777),a(1123)},7354:(e,r,a)=>{a.d(r,{A:()=>o});var t=a(5155);a(2115);let o=e=>{let{type:r="text",id:a,name:o,placeholder:s,defaultValue:n,value:l,onChange:i,className:d="",min:c,max:u,step:m,disabled:g=!1,success:h=!1,error:p=!1,hint:f}=e,w="h-11 w-full rounded-lg border appearance-none px-4 py-2.5 text-sm shadow-theme-xs placeholder:text-gray-400 focus:outline-hidden focus:ring-3 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800 ".concat(d);return g?w+=" text-gray-500 border-gray-300 cursor-not-allowed dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700":p?w+=" text-error-800 border-error-500 focus:ring-3 focus:ring-error-500/10  dark:text-error-400 dark:border-error-500":h?w+=" text-success-500 border-success-400 focus:ring-success-500/10 focus:border-success-300  dark:text-success-400 dark:border-success-500":w+=" bg-transparent text-gray-800 border-gray-300 focus:border-brand-300 focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800",(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:r,id:a,name:o,placeholder:s,defaultValue:n,value:l,onChange:i,min:c,max:u,step:m,disabled:g,className:w}),f&&(0,t.jsx)("p",{className:"mt-1.5 text-xs ".concat(p?"text-error-500":h?"text-success-500":"text-gray-500"),children:f})]})}},7485:(e,r,a)=>{a.d(r,{A:()=>o});let t=a(3464).A.create({baseURL:"https://zaraschool-05bf2031623e.herokuapp.com",headers:{"Content-Type":"application/json",Accept:"application/json"}});t.interceptors.request.use(e=>{let r=localStorage.getItem("authToken");return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),t.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&!window.location.pathname.includes("/signin")&&(localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/signin"),Promise.reject(e)));let o=t}}]);