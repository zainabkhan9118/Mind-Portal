(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6059],{2708:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(7485);let r={getAllCourses:async()=>(await s.A.get("/courses")).data,getCourseById:async e=>(await s.A.get("/courses/".concat(e))).data,createCourse:async e=>(await s.A.post("/courses",e)).data,updateCourse:async(e,a)=>(await s.A.put("/courses/".concat(e),a)).data,deleteCourse:async e=>{await s.A.delete("/courses/".concat(e))},toggleCourseStatus:async(e,a)=>(await s.A.patch("/courses/".concat(e,"/status"),{isActive:a})).data}},2944:(e,a,t)=>{"use strict";t.d(a,{O:()=>c,A:()=>u});var s=t(5155),r=t(2115),o=t(7485);let l=async(e,a)=>{try{console.log("Attempting to authenticate with API:",{email:e,password:"******"});let t=await o.A.post("/auth/login",{email:e,password:a});if(t.data&&t.data.access_token)return localStorage.setItem("authToken",t.data.access_token),{id:t.data.id,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),name:e.split("@")[0],password:"",email:e,phone:"",address:"",role:t.data.role};return console.log("Login response is missing access_token:",t.data),null}catch(e){return console.log("Login API endpoint failed:",e instanceof Error?e.message:e),null}},n=[{id:1,email:"admin@zaraschool.com",password:"admin123",firstName:"Admin",lastName:"User",role:"admin"},{id:2,email:"teacher@zaraschool.com",password:"teacher123",firstName:"Teacher",lastName:"Smith",role:"teacher"},{id:3,email:"student@zaraschool.com",password:"student123",firstName:"Student",lastName:"Jones",role:"student"}],i={admin:"/dashboard/admin",teacher:"/dashboard/teacher",student:"/dashboard/student",default:"/dashboard"},d=(0,r.createContext)(void 0),c=e=>{let{children:a}=e,[t,o]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(e&&o(JSON.parse(e)),u(!1),!localStorage.getItem("users")){let e=n.map(e=>{let{password:a,...t}=e;return t});localStorage.setItem("users",JSON.stringify(e))}},[]);let g=async(e,a)=>{try{if(u(!0),h(null),!e||!a)throw Error("Email and password are required");let t=n.find(t=>t.email.toLowerCase()===e.toLowerCase()&&t.password===a);if(t){let{password:e,...a}=t,s={...a,name:"".concat(a.firstName," ").concat(a.lastName),role:a.role.toLowerCase()};localStorage.setItem("authToken","mock-token-".concat(Date.now())),o(s),localStorage.setItem("user",JSON.stringify(s)),console.log("Signed in as predefined user:",s);return}try{let t=await l(e,a);if(t){let{password:e,...a}=t,s={id:a.id,email:a.email,name:a.name,role:a.role.toLowerCase(),phone:a.phone,address:a.address};o(s),localStorage.setItem("user",JSON.stringify(s)),console.log("Signed in via API:",s)}else h("Invalid credentials. Please check your email and password.")}catch(e){console.error("API authentication error:",e),h("Authentication service is unavailable. Please try again later or use a predefined account.")}}catch(e){h(e instanceof Error?e.message:"Authentication failed"),console.error("Signin error:",e)}finally{u(!1)}},p=async e=>{try{if(u(!0),h(null),!e.email||!e.password||!e.role)throw Error("Email, password, and role are required");if(n.some(a=>a.email===e.email))throw Error("Email is already in use");let a=JSON.parse(localStorage.getItem("users")||"[]");if(a.some(a=>a.email===e.email))throw Error("Email is already in use");let t={id:parseInt("user"+Date.now()),email:e.email,firstName:e.firstName,lastName:e.lastName,name:"".concat(e.firstName," ").concat(e.lastName),role:e.role};a.push(t),localStorage.setItem("users",JSON.stringify(a)),o(t),localStorage.setItem("user",JSON.stringify(t)),console.log("Signed up as:",t)}catch(e){h(e instanceof Error?e.message:"Registration failed"),console.error("Signup error:",e)}finally{u(!1)}},f=!!t;return(0,s.jsx)(d.Provider,{value:{user:t,signin:g,signup:p,signout:()=>{o(null),localStorage.removeItem("user"),console.log("Signed out")},isAuthenticated:f,isLoading:c,error:m,getRedirectPath:()=>t?i[t.role.toLowerCase()]||i.default:"/signin"},children:a})},u=()=>{let e=(0,r.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3121:(e,a,t)=>{Promise.resolve().then(t.bind(t,3489))},3489:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(5155),r=t(2115),o=t(2708),l=t(7393),n=t(2944),i=t(6874),d=t.n(i);function c(){let{isLoading:e,startLoading:a,stopLoading:t}=(0,l.M)(),{user:i}=(0,n.A)(),[c,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(null),[g,p]=(0,r.useState)([]),f=async()=>{try{a();let e=await o.A.getAllCourses();p(e.filter(e=>e.isActive)),h(null)}catch(e){console.error("Failed to fetch courses:",e),h("Failed to load courses. Please try again.")}finally{t()}};return(0,r.useEffect)(()=>{f()},[]),(0,r.useEffect)(()=>{g.length>0&&i&&u(g.filter(e=>e.isActive).map(e=>({id:Math.floor(1e3*Math.random())+1,courseId:e.id,courseName:e.name,courseDescription:e.description,section:"Section ".concat(String.fromCharCode(65+Math.floor(3*Math.random()))),schedule:["Mon/Wed/Fri 10:00-11:30","Tue/Thu 14:00-16:00","Mon/Fri 08:30-10:30"][Math.floor(3*Math.random())],studentCount:Math.floor(30*Math.random())+10})))},[g,i]),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"My Classes"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"View and manage your assigned classes"})]}),m&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-md",children:m}),e?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-500"})}):0===c.length?(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 text-center",children:(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"You don't have any classes assigned yet."})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(e=>(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e.courseName}),(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 mt-2",children:e.section})]}),(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-4",children:e.courseDescription}),(0,s.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("svg",{className:"mr-1.5 h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),e.schedule]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("svg",{className:"mr-1.5 h-5 w-5 text-gray-400 dark:text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),e.studentCount," Students"]})]})]}),(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 px-5 py-3",children:(0,s.jsx)(d(),{href:"/dashboard/teacher/classes/".concat(e.id),className:"text-sm font-medium text-brand-600 hover:text-brand-500 dark:text-brand-400 dark:hover:text-brand-300",children:"View Class Details â†’"})})]},e.id))})]})}},7393:(e,a,t)=>{"use strict";t.d(a,{A:()=>o,M:()=>r});var s=t(2115);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[a,t]=(0,s.useState)(e),r=(0,s.useCallback)(()=>{t(!0)},[]),o=(0,s.useCallback)(()=>{t(!1)},[]),l=(0,s.useCallback)(async e=>{try{return r(),await e}finally{o()}},[r,o]);return{isLoading:a,startLoading:r,stopLoading:o,withLoading:l}},o=r},7485:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let s=t(3464).A.create({baseURL:"https://zaraschool-05bf2031623e.herokuapp.com",headers:{"Content-Type":"application/json",Accept:"application/json"}});s.interceptors.request.use(e=>{let a=localStorage.getItem("authToken");return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&!window.location.pathname.includes("/signin")&&(localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/signin"),Promise.reject(e)));let r=s}},e=>{var a=a=>e(e.s=a);e.O(0,[6874,3464,8441,1684,7358],()=>a(3121)),_N_E=e.O()}]);