(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4913],{2708:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(7485);let s={getAllCourses:async()=>(await r.A.get("/courses")).data,getCourseById:async e=>(await r.A.get("/courses/".concat(e))).data,createCourse:async e=>(await r.A.post("/courses",e)).data,updateCourse:async(e,t)=>(await r.A.put("/courses/".concat(e),t)).data,deleteCourse:async e=>{await r.A.delete("/courses/".concat(e))},toggleCourseStatus:async(e,t)=>(await r.A.patch("/courses/".concat(e,"/status"),{isActive:t})).data}},3415:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(5155),s=a(2115),n=a(5695),o=a(6874),i=a.n(o),c=a(2708),d=a(7393);function l(){let e=(0,n.useRouter)(),t=Number((0,n.useParams)().id),{isLoading:a,startLoading:o,stopLoading:l}=(0,d.M)(),[u,m]=(0,s.useState)(null),[h,b]=(0,s.useState)({name:"",description:"",isActive:!0});(0,s.useEffect)(()=>{let e=async()=>{try{o();let e=await c.A.getCourseById(t);b(e),m(null)}catch(e){console.error("Failed to fetch course details:",e),m("Failed to load course details. Please try again.")}finally{l()}};t&&e()},[t,o,l]);let g=e=>{let{name:t,value:a,type:r}=e.target;if("checkbox"===r){let a=e.target.checked;b(e=>({...e,[t]:a}))}else b(e=>({...e,[t]:a}))},x=async a=>{if(a.preventDefault(),!h.name.trim()){m("Course name is required");return}if(!h.description.trim()){m("Course description is required");return}try{o(),await c.A.updateCourse(t,{name:h.name,description:h.description,isActive:h.isActive}),e.push("/dashboard/admin/courses")}catch(e){console.error("Failed to update course:",e),m("Failed to update course. Please try again.")}finally{l()}};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Edit Course"}),(0,r.jsx)(i(),{href:"/dashboard/admin/courses",className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-700",children:"Back to Courses"})]}),u&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-md",children:u}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6",children:a&&!h.id?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-500"})}):(0,r.jsxs)("form",{onSubmit:x,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Name"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:h.name,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter course name",disabled:a})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course Description"}),(0,r.jsx)("textarea",{id:"description",name:"description",value:h.description,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter course description (objectives, content, teaching methods, etc.)",rows:6,disabled:a}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"A comprehensive description should outline learning objectives, target audience, content, and teaching methods."})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"isActive",name:"isActive",type:"checkbox",checked:h.isActive,onChange:e=>b({...h,isActive:e.target.checked}),className:"h-4 w-4 text-brand-500 focus:ring-brand-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Course Active"})]}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Active courses are visible to teachers and students"})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",className:"inline-flex items-center px-4 py-2 bg-brand-500 text-white rounded-md hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:a,children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Course"})})]})})]})}},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6990:(e,t,a)=>{Promise.resolve().then(a.bind(a,3415))},7393:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,M:()=>s});var r=a(2115);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,a]=(0,r.useState)(e),s=(0,r.useCallback)(()=>{a(!0)},[]),n=(0,r.useCallback)(()=>{a(!1)},[]),o=(0,r.useCallback)(async e=>{try{return s(),await e}finally{n()}},[s,n]);return{isLoading:t,startLoading:s,stopLoading:n,withLoading:o}},n=s},7485:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let r=a(3464).A.create({baseURL:"https://zaraschool-05bf2031623e.herokuapp.com",headers:{"Content-Type":"application/json",Accept:"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&!window.location.pathname.includes("/signin")&&(localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/signin"),Promise.reject(e)));let s=r}},e=>{var t=t=>e(e.s=t);e.O(0,[6874,3464,8441,1684,7358],()=>t(6990)),_N_E=e.O()}]);