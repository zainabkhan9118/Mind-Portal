(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2476],{2166:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(5155),s=a(2115),d=a(6874),i=a.n(d),c=a(2708),n=a(7393);function l(){let[e,t]=(0,s.useState)([]),{isLoading:a,startLoading:d,stopLoading:l}=(0,n.M)(),[o,x]=(0,s.useState)(null),u=(0,s.useCallback)(async()=>{try{d();let e=await c.A.getAllCourses();t(e),x(null)}catch(e){console.error("Failed to fetch courses:",e),x("Failed to load courses. Please try again.")}finally{l()}},[d,l]);(0,s.useEffect)(()=>{u()},[u]);let g=async(e,a)=>{try{d(),await c.A.toggleCourseStatus(e,!a),t(t=>t.map(t=>t.id===e?{...t,isActive:!a}:t))}catch(e){console.error("Failed to toggle course status:",e),x("Failed to update course status. Please try again.")}finally{l()}},h=async e=>{if(window.confirm("Are you sure you want to delete this course?"))try{d(),await c.A.deleteCourse(e),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to delete course:",e),x("Failed to delete course. Please try again.")}finally{l()}};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Courses Management"}),(0,r.jsxs)(i(),{href:"/dashboard/admin/courses/add",className:"inline-flex items-center px-4 py-2 bg-brand-500 text-white rounded-md hover:bg-brand-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500",children:[(0,r.jsx)("span",{className:"mr-2",children:"+"})," Add New Course"]})]}),o&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded-md",children:o}),a?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-500"})}):0===e.length?(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 text-center",children:(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"No courses found. Add a new course to get started."})}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full bg-white dark:bg-gray-800 shadow rounded-lg",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),(0,r.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsx)("td",{className:"py-4 px-6 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:e.id}),(0,r.jsx)("td",{className:"py-4 px-6 text-sm font-medium text-gray-900 dark:text-white whitespace-nowrap",children:e.name}),(0,r.jsx)("td",{className:"py-4 px-6 text-sm text-gray-500 dark:text-gray-300",children:e.description.length>100?"".concat(e.description.substring(0,100),"..."):e.description}),(0,r.jsx)("td",{className:"py-4 px-6 text-sm whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(e.isActive?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"),children:e.isActive?"Active":"Inactive"})}),(0,r.jsx)("td",{className:"py-4 px-6 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)("td",{className:"py-4 px-6 text-sm font-medium whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(i(),{href:"/dashboard/admin/courses/edit/".concat(e.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>{var t;return g(e.id,null!==(t=e.isActive)&&void 0!==t&&t)},className:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300",children:e.isActive?"":"Acti"}),(0,r.jsx)("button",{onClick:()=>h(e.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})})]},e.id))})]})})]})}},2708:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(7485);let s={getAllCourses:async()=>(await r.A.get("/courses")).data,getCourseById:async e=>(await r.A.get("/courses/".concat(e))).data,createCourse:async e=>(await r.A.post("/courses",e)).data,updateCourse:async(e,t)=>(await r.A.put("/courses/".concat(e),t)).data,deleteCourse:async e=>{await r.A.delete("/courses/".concat(e))},toggleCourseStatus:async(e,t)=>(await r.A.patch("/courses/".concat(e,"/status"),{isActive:t})).data}},4804:(e,t,a)=>{Promise.resolve().then(a.bind(a,2166))},7393:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,M:()=>s});var r=a(2115);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,a]=(0,r.useState)(e),s=(0,r.useCallback)(()=>{a(!0)},[]),d=(0,r.useCallback)(()=>{a(!1)},[]),i=(0,r.useCallback)(async e=>{try{return s(),await e}finally{d()}},[s,d]);return{isLoading:t,startLoading:s,stopLoading:d,withLoading:i}},d=s},7485:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let r=a(3464).A.create({baseURL:"https://zaraschool-05bf2031623e.herokuapp.com",headers:{"Content-Type":"application/json",Accept:"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&!window.location.pathname.includes("/signin")&&(localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/signin"),Promise.reject(e)));let s=r}},e=>{var t=t=>e(e.s=t);e.O(0,[6874,3464,8441,1684,7358],()=>t(4804)),_N_E=e.O()}]);